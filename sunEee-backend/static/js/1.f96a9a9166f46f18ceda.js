webpackJsonp([1],{576:function(e,t,n){function o(e){n(644)}var i=n(56)(n(602),n(661),o,"data-v-e2ac0d38",null);e.exports=i.exports},586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"items",props:["model"],components:{},data:function(){return{num:0,open:!0,isFolder:this.model.subMenuList}},computed:{},methods:{toggle:function(){},close:function(e,t){var n=this.$refs[e].length-1;console.log(this.$refs[e][n].checked),t==n&&this.$refs[e][n].checked?(this.$refs[e].forEach(function(e,t){e.checked=!1}),this.$refs[e][t].checked=!0):(t!=n||this.$refs[e][n].checked)&&this.$refs[e][n].checked&&(this.$refs[e][n].checked=!this.$refs[e][n].checked)}},watch:{isFolder:function(){console.log(this.num),++this.num}}}},589:function(e,t,n){t=e.exports=n(567)(!0),t.push([e.i,"li[data-v-00596a2c]{width:17.001rem}li p[data-v-00596a2c]{height:50px;line-height:50px;border-bottom:1px solid #d9d9d9;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px}li p span[data-v-00596a2c]{width:25%;float:left;height:50px;line-height:50px;text-align:center;border-right:1px solid #d9d9d9;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}li p span b[data-v-00596a2c]{font-weight:400;margin-left:30px}li p span[data-v-00596a2c]:first-child{text-align:left;width:30%}li p span[data-v-00596a2c]:last-child{border-right:none}li ul li div p span b[data-v-00596a2c]{margin-left:60px}li ul li ul li div p span b[data-v-00596a2c]{margin-left:90px}li ul li ul li ul li div p span b[data-v-00596a2c]{margin-left:120px}li ul li ul li ul li ul li div p span b[data-v-00596a2c]{margin-left:150px}","",{version:3,sources:["E:/yucai-xiangmu/backend/sunEee-backend/src/components/treeMenu.vue"],names:[],mappings:"AACA,oBACE,eAAiB,CAClB,AACD,sBACE,YAAa,AACb,iBAAkB,AAClB,gCAAiC,AACjC,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,cAAgB,CACjB,AACD,2BACE,UAAW,AACX,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,+BAAgC,AAChC,gBAAiB,AACjB,uBAAwB,AACxB,kBAAoB,CACrB,AACD,6BACE,gBAAiB,AACjB,gBAAkB,CACnB,AACD,uCACE,gBAAiB,AACjB,SAAW,CACZ,AACD,sCACE,iBAAmB,CACpB,AACD,uCACE,gBAAkB,CACnB,AACD,6CACE,gBAAkB,CACnB,AACD,mDACE,iBAAmB,CACpB,AACD,yDACE,iBAAmB,CACpB",file:"treeMenu.vue",sourcesContent:["\nli[data-v-00596a2c] {\n  width: 17.001rem;\n}\nli p[data-v-00596a2c] {\n  height: 50px;\n  line-height: 50px;\n  border-bottom: 1px solid #d9d9d9;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  font-size: 14px;\n}\nli p span[data-v-00596a2c] {\n  width: 25%;\n  float: left;\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  border-right: 1px solid #d9d9d9;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\nli p span b[data-v-00596a2c] {\n  font-weight: 400;\n  margin-left: 30px;\n}\nli p span[data-v-00596a2c]:first-child {\n  text-align: left;\n  width: 30%;\n}\nli p span[data-v-00596a2c]:last-child {\n  border-right: none;\n}\nli ul li div p span b[data-v-00596a2c] {\n  margin-left: 60px;\n}\nli ul li ul li div p span b[data-v-00596a2c] {\n  margin-left: 90px;\n}\nli ul li ul li ul li div p span b[data-v-00596a2c] {\n  margin-left: 120px;\n}\nli ul li ul li ul li ul li div p span b[data-v-00596a2c] {\n  margin-left: 150px;\n}\n"],sourceRoot:""}])},590:function(e,t,n){var o=n(589);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(568)("216c8af8",o,!0,{})},591:function(e,t,n){function o(e){n(590)}var i=n(56)(n(586),n(592),o,"data-v-00596a2c",null);e.exports=i.exports},592:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("div",{on:{click:e.toggle}},[n("p",[n("span",[n("b",{staticClass:"menuIds",attrs:{"data-id":e.model.id}},[e._v(e._s(e.model.name))])]),e._v(" "),e._l(e.model.permissionPackageList,function(t,o){return n("span",{key:t.id},[n("input",{ref:e.model.name,refInFor:!0,attrs:{type:"checkbox",name:e.model.name,id:"",disabled:null==t.id},domProps:{checked:1==t.checked,value:null==t.id?"":t.id},on:{click:function(t){e.close(e.model.name,o)}}})])})],2)]),e._v(" "),e.isFolder?n("ul",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}]},e._l(e.model.subMenuList,function(e){return n("items",{key:e.id,attrs:{model:e}})})):e._e()])},staticRenderFns:[]}},602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var o=n(213),i=n.n(o),a=n(591),l=n.n(a);t.default={data:function(){return{noPermission:!1,permissionFlag:!1,loadingNew:!1,projectList:[],moduleList:[],modulePermissionList:"",form:{name:"",xiangmu:"",memo:"",projectID:"",projectName:""},formLabelWidth:"96px",rulesAdd:{name:[{validator:function(e,t,n){var o=/[@#\$%\^&\*<>!(),\.￥]+/g;""==t?n("角色名称不能为空"):1==o.test(t)?n("不能有非法字符"):n()},trigger:"blur"},{max:8,message:"长度在  8 个字符以内",trigger:"blur"}],projectID:[{required:!0,message:"请选择所属项目"}],memo:[{max:30,message:"长度在  30个字符以内",trigger:"blur"}]},moduleListName:[],moduleListChecked:[]}},components:{tips:i.a,items:l.a},mounted:function(){this.getProject(),this.getModulePermission()},methods:{getProject:function(){var e=this;this.axios.post("/sysCMSController/selectAllSysItem").then(function(t){e.projectList=t.data.data,e.form.projectID=e.projectList[0].id,e.form.projectName=e.projectList[0].name,e.selProject(e.projectList[0].id)}).catch(function(e){console.log(e)})},getModulePermission:function(){var e=this;this.axios.post("/permission/getAllPermatch").then(function(t){e.modulePermissionList=t.data.data}).catch(function(e){console.log(e)})},selProject:function(e){var t=this;""==e||null==e||this.axios.post("/menu/selectByGardePermission",{id:e}).then(function(e){t.moduleList=e.data.data,null==t.moduleList?t.noPermission=!0:t.noPermission=!1}).catch(function(e){console.log(e)})},save:function(t){var n=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;for(var o=[],i=[],a=[],l=0;l<e("input[type=checkbox]").length;l++)e("input[type=checkbox]").eq(l).is(":checked")&&(i.push(e("input[type=checkbox]").eq(l).attr("value")),a.push(e("input[type=checkbox]").eq(l).parent().parent().find(".menuIds").attr("data-id"),e("input[type=checkbox]").eq(l).parents("div").find("b").attr("data-id")));for(var l=0;l<a.length;l++)-1==o.indexOf(a[l])&&o.push(a[l]);if(""==o)n.permissionFlag=!0;else{n.loadingNew=!0,n.permissionFlag=!1;var r=o.join(","),c=i.join(","),s={userId:1,roleName:n.form.name,memo:n.form.memo,itemId:n.form.projectID,menuIds:r,pids:c};n.axios({method:"post",url:"/roleContoller/saveRole",data:s,traditional:!0}).then(function(e){n.loadingNew=!1,"SUCCESS"==e.data.status?n.$message({type:"success",message:"恭喜你，保存成功"}):n.$message.error("保存失败")}).catch(function(e){console.log(e)})}})},off:function(t){this.$refs[t].resetFields();for(var n=0;n<e("input[type=checkbox]").length;n++)e("input[type=checkbox]").eq(n).prop("checked",!1);this.permissionFlag=!1},close:function(e,t){var n=this.$refs[e].length-1;t==n&&this.$refs[e][n].checked?(this.$refs[e].forEach(function(e,t){e.checked=!1}),this.$refs[e][t].checked=!0):(t!=n||this.$refs[e][n].checked)&&this.$refs[e][n].checked&&(this.$refs[e][n].checked=!this.$refs[e][n].checked)}}}}.call(t,n(217))},629:function(e,t,n){t=e.exports=n(567)(!0),t.push([e.i,".creatingRoles[data-v-e2ac0d38]{width:23.9375rem;min-width:766px;margin:20px auto}.creatingRoles .xj-content[data-v-e2ac0d38]{margin-top:20px;background:#fff}.creatingRoles .xj-content .xj-title[data-v-e2ac0d38]{font-size:16px;height:44px;line-height:44px;background:#abc2d7;color:#fff;padding-left:20px;margin-bottom:30px;-webkit-box-shadow:0 2px 10px #ccc;box-shadow:0 2px 10px #ccc}.creatingRoles .xj-content .xj-title i[data-v-e2ac0d38]{margin-right:8px;vertical-align:middle}.creatingRoles .xj-content .el-form .el-form-item[data-v-e2ac0d38]{margin-bottom:30px;padding-left:1.3125rem}.creatingRoles .xj-content .el-form .el-form-item__content[data-v-e2ac0d38]{position:relative}.creatingRoles .xj-content .el-form .el-form-item__content .el-input[data-v-e2ac0d38],.creatingRoles .xj-content .el-form .el-form-item__content .el-select[data-v-e2ac0d38],.creatingRoles .xj-content .el-form .el-form-item__content .el-textarea[data-v-e2ac0d38]{width:17rem}.creatingRoles .xj-content .el-form .el-form-item__content #mudle-table[data-v-e2ac0d38]{width:17rem;border:1px solid #d9d9d9;margin-bottom:36px;overflow:hidden;border-bottom:none}.creatingRoles .xj-content .el-form .el-form-item__content .thead[data-v-e2ac0d38]{width:17rem}.creatingRoles .xj-content .el-form .el-form-item__content .thead li[data-v-e2ac0d38]{width:17.024rem;border-bottom:1px solid #d9d9d9}.creatingRoles .xj-content .el-form .el-form-item__content .thead li p[data-v-e2ac0d38]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:16px;height:50px;line-height:50px;border-right:1px solid #ccc}.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span[data-v-e2ac0d38]{width:25%;text-align:center;border-right:1px solid #ccc}.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span a[data-v-e2ac0d38]{color:#0190d4}.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span[data-v-e2ac0d38]:first-child{text-align:left;width:30%}.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span:first-child a[data-v-e2ac0d38]{margin-left:30px}.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span[data-v-e2ac0d38]:last-child{border:none}.creatingRoles .xj-content .el-form .el-form-item__content .moduleCon[data-v-e2ac0d38]{width:17rem;max-height:350px;overflow-x:hidden;position:relative;color:#48576a}.creatingRoles .xj-content .el-form .el-form-item__content .noPermission[data-v-e2ac0d38]{border-bottom:1px solid #d9d9d9;height:50px;line-height:50px;text-align:center;color:#48576a}.creatingRoles .xj-content .el-form .el-form-item__content .error[data-v-e2ac0d38]{color:red;position:absolute;bottom:0}.creatingRoles .xj-content .el-form .el-form-item[data-v-e2ac0d38]:last-child{margin-bottom:0}","",{version:3,sources:["E:/yucai-xiangmu/backend/sunEee-backend/src/pages/authorityManagement/createRoles/index.vue"],names:[],mappings:"AACA,gCACE,iBAAkB,AAClB,gBAAiB,AACjB,gBAAkB,CACnB,AACD,4CACE,gBAAiB,AACjB,eAAoB,CACrB,AACD,sDACE,eAAgB,AAChB,YAAa,AACb,iBAAkB,AAClB,mBAAoB,AACpB,WAAe,AACf,kBAAmB,AACnB,mBAAoB,AACpB,mCAAuC,AAC/B,0BAA+B,CACxC,AACD,wDACE,iBAAkB,AAClB,qBAAuB,CACxB,AACD,mEACE,mBAAoB,AACpB,sBAAwB,CACzB,AACD,4EACE,iBAAmB,CACpB,AAOD,sQACE,WAAa,CACd,AACD,yFACE,YAAa,AACb,yBAA0B,AAC1B,mBAAoB,AACpB,gBAAiB,AACjB,kBAAoB,CACrB,AACD,mFACE,WAAa,CACd,AACD,sFACE,gBAAiB,AACjB,+BAAiC,CAClC,AACD,wFACE,WAAY,AACZ,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,eAAgB,AAChB,YAAa,AACb,iBAAkB,AAClB,2BAA6B,CAC9B,AACD,6FACE,UAAW,AACX,kBAAmB,AACnB,2BAA6B,CAC9B,AACD,+FACE,aAAe,CAChB,AACD,yGACE,gBAAiB,AACjB,SAAW,CACZ,AACD,2GACE,gBAAkB,CACnB,AACD,wGACE,WAAa,CACd,AACD,uFACE,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,kBAAmB,AACnB,aAAe,CAChB,AACD,0FACE,gCAAiC,AACjC,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,aAAe,CAChB,AACD,mFACE,UAAW,AACX,kBAAmB,AACnB,QAAU,CACX,AACD,8EACE,eAAiB,CAClB",file:"index.vue",sourcesContent:["\n.creatingRoles[data-v-e2ac0d38] {\n  width: 23.9375rem;\n  min-width: 766px;\n  margin: 20px auto;\n}\n.creatingRoles .xj-content[data-v-e2ac0d38] {\n  margin-top: 20px;\n  background: #ffffff;\n}\n.creatingRoles .xj-content .xj-title[data-v-e2ac0d38] {\n  font-size: 16px;\n  height: 44px;\n  line-height: 44px;\n  background: #ABC2D7;\n  color: #ffffff;\n  padding-left: 20px;\n  margin-bottom: 30px;\n  -webkit-box-shadow: 0 2px 10px #cccccc;\n          box-shadow: 0 2px 10px #cccccc;\n}\n.creatingRoles .xj-content .xj-title i[data-v-e2ac0d38] {\n  margin-right: 8px;\n  vertical-align: middle;\n}\n.creatingRoles .xj-content .el-form .el-form-item[data-v-e2ac0d38] {\n  margin-bottom: 30px;\n  padding-left: 1.3125rem;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content[data-v-e2ac0d38] {\n  position: relative;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .el-select[data-v-e2ac0d38] {\n  width: 17rem;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .el-input[data-v-e2ac0d38] {\n  width: 17rem;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .el-textarea[data-v-e2ac0d38] {\n  width: 17rem;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content #mudle-table[data-v-e2ac0d38] {\n  width: 17rem;\n  border: 1px solid #d9d9d9;\n  margin-bottom: 36px;\n  overflow: hidden;\n  border-bottom: none;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .thead[data-v-e2ac0d38] {\n  width: 17rem;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .thead li[data-v-e2ac0d38] {\n  width: 17.024rem;\n  border-bottom: 1px solid #d9d9d9;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .thead li p[data-v-e2ac0d38] {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  font-size: 16px;\n  height: 50px;\n  line-height: 50px;\n  border-right: 1px solid #ccc;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span[data-v-e2ac0d38] {\n  width: 25%;\n  text-align: center;\n  border-right: 1px solid #ccc;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span a[data-v-e2ac0d38] {\n  color: #0190D4;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span[data-v-e2ac0d38]:first-child {\n  text-align: left;\n  width: 30%;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span:first-child a[data-v-e2ac0d38] {\n  margin-left: 30px;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .thead li p span[data-v-e2ac0d38]:last-child {\n  border: none;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .moduleCon[data-v-e2ac0d38] {\n  width: 17rem;\n  max-height: 350px;\n  overflow-x: hidden;\n  position: relative;\n  color: #48576a;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .noPermission[data-v-e2ac0d38] {\n  border-bottom: 1px solid #d9d9d9;\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  color: #48576a;\n}\n.creatingRoles .xj-content .el-form .el-form-item__content .error[data-v-e2ac0d38] {\n  color: red;\n  position: absolute;\n  bottom: 0;\n}\n.creatingRoles .xj-content .el-form .el-form-item[data-v-e2ac0d38]:last-child {\n  margin-bottom: 0;\n}\n"],sourceRoot:""}])},644:function(e,t,n){var o=n(629);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(568)("219b7edb",o,!0,{})},661:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"creatingRoles"},[n("tips",[n("span",{attrs:{slot:"nav"},slot:"nav"},[e._v("权限管理 > 新建角色")])]),e._v(" "),n("div",{staticClass:"xj-content"},[e._m(0),e._v(" "),n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingNew,expression:"loadingNew"}],ref:"form",attrs:{model:e.form,rules:e.rulesAdd}},[n("el-form-item",{attrs:{label:"角色名称","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入角色名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,prop:"memo"}},[n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入描述"},model:{value:e.form.memo,callback:function(t){e.$set(e.form,"memo","string"==typeof t?t.trim():t)},expression:"form.memo"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"所属项目","label-width":e.formLabelWidth,prop:"projectID"}},[n("el-select",{attrs:{filterable:"",placeholder:e.form.projectName},on:{change:e.selProject},model:{value:e.form.projectID,callback:function(t){e.$set(e.form,"projectID",t)},expression:"form.projectID"}},e._l(e.projectList,function(e,t){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"模块权限","label-width":e.formLabelWidth}},[n("div",{attrs:{id:"mudle-table"}},[n("ul",{staticClass:"thead"},[n("li",[n("p",e._l(e.modulePermissionList,function(t,o){return n("span",{key:o},[n("a",{domProps:{innerHTML:e._s(t.name)}})])}))])]),e._v(" "),n("ul",{staticClass:"moduleCon"},[e._l(e.moduleList,function(e){return n("items",{key:e.id,attrs:{model:e}})}),e._v(" "),e.noPermission?n("p",{staticClass:"noPermission"},[e._v("此角色没有模块权限")]):e._e()],2)]),e._v(" "),e.permissionFlag?n("p",{staticClass:"error"},[e._v("请至少选择一个权限")]):e._e()]),e._v(" "),n("el-form-item",{staticClass:"btn",staticStyle:{display:"block",height:"74px"}},[n("el-button",{staticClass:"save",attrs:{type:"primary"},on:{click:function(t){e.save("form")}}},[e._v("保存")]),e._v(" "),n("el-button",{staticClass:"off",on:{click:function(t){e.off("form")}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xj-title"},[n("i",{staticClass:"iconfont icon-quanxianguanli2"}),e._v("新建角色")])}]}}});
//# sourceMappingURL=1.f96a9a9166f46f18ceda.js.map